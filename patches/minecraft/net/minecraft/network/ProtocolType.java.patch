--- a/net/minecraft/network/ProtocolType.java
+++ b/net/minecraft/network/ProtocolType.java
@@ -252,6 +252,9 @@
 
       @Nullable
       public IPacket<?> func_229718_a_(int p_229718_1_) {
+         if (p_229718_1_ < 0 || p_229718_1_ >= this.field_229715_a_.size()) {
+            return null; // Paper
+         }
          Supplier<? extends IPacket<T>> supplier = this.field_229716_b_.get(p_229718_1_);
          return supplier != null ? supplier.get() : null;
       }
