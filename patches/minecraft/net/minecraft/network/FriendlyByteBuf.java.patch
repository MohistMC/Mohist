--- a/net/minecraft/network/FriendlyByteBuf.java
+++ b/net/minecraft/network/FriendlyByteBuf.java
@@ -5,6 +_,7 @@
 import com.google.common.collect.Maps;
 import com.google.gson.Gson;
 import com.google.gson.JsonElement;
+import com.mohistmc.paper.adventure.PaperAdventure;
 import com.mojang.authlib.GameProfile;
 import com.mojang.authlib.properties.Property;
 import com.mojang.authlib.properties.PropertyMap;
@@ -78,11 +_,12 @@
 import org.joml.Quaternionf;
 import org.joml.Vector3f;
 
-public class FriendlyByteBuf extends ByteBuf {
+public class FriendlyByteBuf extends ByteBuf implements net.minecraftforge.common.extensions.IForgeFriendlyByteBuf {
    private static final int f_178335_ = 5;
    private static final int f_178336_ = 10;
    public static final int f_178337_ = 2097152;
    private final ByteBuf f_130049_;
+   public java.util.Locale adventure$locale; // Paper
    public static final short f_178333_ = Short.MAX_VALUE;
    public static final int f_178334_ = 262144;
    private static final int f_236798_ = 256;
@@ -505,9 +_,19 @@
          return component;
       }
    }
+   // Paper start
+   public FriendlyByteBuf writeComponent(final net.kyori.adventure.text.Component component) {
+      return this.m_130072_(PaperAdventure.asJsonString(component, this.adventure$locale), 262144);
+   }
+
+   @Deprecated
+   public FriendlyByteBuf writeComponent(final net.md_5.bungee.api.chat.BaseComponent[] component) {
+      return this.m_130072_(net.md_5.bungee.chat.ComponentSerializer.toString(component), 262144);
+   }
+   // Paper end
 
    public FriendlyByteBuf m_130083_(Component p_130084_) {
-      return this.m_130072_(Component.Serializer.m_130703_(p_130084_), 262144);
+      return this.m_130072_(PaperAdventure.asJsonString(p_130084_, this.adventure$locale), 262144); // Paper
    }
 
    public <T extends Enum<T>> T m_130066_(Class<T> p_130067_) {
@@ -622,6 +_,15 @@
    }
 
    public FriendlyByteBuf m_130055_(ItemStack p_130056_) {
+      return writeItemStack(p_130056_, true);
+   }
+
+   /**
+    * Most ItemStack serialization is Server to Client,and doesn't need to know the FULL tag details.
+    * One exception is items from the creative menu, which must be sent from Client to Server with their full NBT.
+    * If you want to send the FULL tag set limitedTag to false
+    */
+   public FriendlyByteBuf writeItemStack(ItemStack p_130056_, boolean limitedTag) {
       if (p_130056_.m_41619_()) {
          this.writeBoolean(false);
       } else {
@@ -630,8 +_,8 @@
          this.m_236818_(BuiltInRegistries.f_257033_, item);
          this.writeByte(p_130056_.m_41613_());
          CompoundTag compoundtag = null;
-         if (item.m_41465_() || item.m_41468_()) {
-            compoundtag = p_130056_.m_41783_();
+         if (item.isDamageable(p_130056_) || item.m_41468_()) {
+            compoundtag = limitedTag ? p_130056_.getShareTag() : p_130056_.m_41783_();
          }
 
          this.m_130079_(compoundtag);
@@ -647,7 +_,7 @@
          Item item = this.m_236816_(BuiltInRegistries.f_257033_);
          int i = this.readByte();
          ItemStack itemstack = new ItemStack(item, i);
-         itemstack.m_41751_(this.m_130260_());
+         itemstack.readShareTag(this.m_130260_());
          return itemstack;
       }
    }
@@ -703,7 +_,7 @@
    }
 
    public FriendlyByteBuf m_130085_(ResourceLocation p_130086_) {
-      this.m_130070_(p_130086_.toString());
+      if (p_130086_ != null) this.m_130070_(p_130086_.toString());
       return this;
    }
 
