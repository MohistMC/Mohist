--- a/net/minecraft/world/level/saveddata/maps/MapItemSavedData.java
+++ b/net/minecraft/world/level/saveddata/maps/MapItemSavedData.java
@@ -3,10 +_,8 @@
 import com.google.common.collect.Lists;
 import com.google.common.collect.Maps;
 import com.mojang.serialization.Dynamic;
-import java.util.Collection;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Map;
+
+import java.util.*;
 import javax.annotation.Nullable;
 import net.minecraft.core.BlockPos;
 import net.minecraft.nbt.CompoundTag;
@@ -28,6 +_,8 @@
 import net.minecraft.world.level.saveddata.SavedData;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
+import org.bukkit.craftbukkit.CraftServer;
+import org.bukkit.craftbukkit.map.CraftMapView;
 
 public class MapItemSavedData extends SavedData {
    private static final Logger f_77895_ = LogManager.getLogger();
@@ -35,21 +_,28 @@
    private static final int f_164766_ = 64;
    public static final int f_164764_ = 4;
    public static final int f_181307_ = 256;
-   public final int f_77885_;
-   public final int f_77886_;
-   public final ResourceKey<Level> f_77887_;
-   private final boolean f_77888_;
-   private final boolean f_77889_;
-   public final byte f_77890_;
+   public int f_77885_;
+   public int f_77886_;
+   public ResourceKey<Level> f_77887_;
+   public boolean f_77888_;
+   public boolean f_77889_;
+   public byte f_77890_;
    public byte[] f_77891_ = new byte[16384];
-   public final boolean f_77892_;
+   public boolean f_77892_;
    private final List<MapItemSavedData.HoldingPlayer> f_77893_ = Lists.newArrayList();
    private final Map<Player, MapItemSavedData.HoldingPlayer> f_77896_ = Maps.newHashMap();
    private final Map<String, MapBanner> f_77897_ = Maps.newHashMap();
-   final Map<String, MapDecoration> f_77894_ = Maps.newLinkedHashMap();
+   public final Map<String, MapDecoration> f_77894_ = Maps.newLinkedHashMap();
    private final Map<String, MapFrame> f_77898_ = Maps.newHashMap();
    private int f_181308_;
 
+   // CraftBukkit start
+   public final CraftMapView mapView;
+   private CraftServer server;
+   private UUID uniqueId = null;
+   public String id;
+   // CraftBukkit end
+
    private MapItemSavedData(int p_164768_, int p_164769_, byte p_164770_, boolean p_164771_, boolean p_164772_, boolean p_164773_, ResourceKey<Level> p_164774_) {
       this.f_77890_ = p_164770_;
       this.f_77885_ = p_164768_;
@@ -59,6 +_,11 @@
       this.f_77889_ = p_164772_;
       this.f_77892_ = p_164773_;
       this.m_77762_();
+
+      // CraftBukkit start
+      mapView = new CraftMapView(this);
+      server = (CraftServer) org.bukkit.Bukkit.getServer();
+      // CraftBukkit end
    }
 
    public static MapItemSavedData m_164780_(double p_164781_, double p_164782_, byte p_164783_, boolean p_164784_, boolean p_164785_, ResourceKey<Level> p_164786_) {
@@ -308,7 +_,7 @@
       return mapitemsaveddata$holdingplayer == null ? null : mapitemsaveddata$holdingplayer.m_164815_(p_164797_);
    }
 
-   private void m_164789_(int p_164790_, int p_164791_) {
+   public void m_164789_(int p_164790_, int p_164791_) {
       this.m_77762_();
 
       for(MapItemSavedData.HoldingPlayer mapitemsaveddata$holdingplayer : this.f_77893_) {
