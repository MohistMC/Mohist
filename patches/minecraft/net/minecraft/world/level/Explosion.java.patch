--- a/net/minecraft/world/level/Explosion.java
+++ b/net/minecraft/world/level/Explosion.java
@@ -56,6 +_,13 @@
    private final ExplosionDamageCalculator f_46019_;
    private final ObjectArrayList<BlockPos> f_46020_ = new ObjectArrayList<>();
    private final Map<Player, Vec3> f_46021_ = Maps.newHashMap();
+   private final Vec3 position;
+
+   public boolean wasCanceled = false; // CraftBukkit - add field
+
+   public Explosion(Level p_151471_, @Nullable Entity p_151472_, double p_151473_, double p_151474_, double p_151475_, float p_151476_) {
+      this(p_151471_, p_151472_, p_151473_, p_151474_, p_151475_, p_151476_, false, Explosion.BlockInteraction.DESTROY_WITH_DECAY);
+   }
 
    public Explosion(Level p_46024_, @Nullable Entity p_46025_, double p_46026_, double p_46027_, double p_46028_, float p_46029_, List<BlockPos> p_46030_) {
       this(p_46024_, p_46025_, p_46026_, p_46027_, p_46028_, p_46029_, false, Explosion.BlockInteraction.DESTROY_WITH_DECAY, p_46030_);
@@ -73,7 +_,7 @@
    public Explosion(Level p_46051_, @Nullable Entity p_46052_, @Nullable DamageSource p_46053_, @Nullable ExplosionDamageCalculator p_46054_, double p_46055_, double p_46056_, double p_46057_, float p_46058_, boolean p_46059_, Explosion.BlockInteraction p_46060_) {
       this.f_46012_ = p_46051_;
       this.f_46016_ = p_46052_;
-      this.f_46017_ = p_46058_;
+      this.f_46017_ = (float) Math.max(p_46058_, 0.0); // CraftBukkit - clamp bad values
       this.f_46013_ = p_46055_;
       this.f_46014_ = p_46056_;
       this.f_46015_ = p_46057_;
@@ -81,6 +_,7 @@
       this.f_46010_ = p_46060_;
       this.f_46018_ = p_46053_ == null ? DamageSource.m_19358_(this) : p_46053_;
       this.f_46019_ = p_46054_ == null ? this.m_46062_(p_46052_) : p_46054_;
+      this.position = new Vec3(this.f_46013_, this.f_46014_, this.f_46015_);
    }
 
    private ExplosionDamageCalculator m_46062_(@Nullable Entity p_46063_) {
@@ -121,6 +_,11 @@
    }
 
    public void m_46061_() {
+      // CraftBukkit start
+      if (this.f_46017_ < 0.1F) {
+         return;
+      }
+      // CraftBukkit end
       this.f_46012_.m_220400_(this.f_46016_, GameEvent.f_157812_, new Vec3(this.f_46013_, this.f_46014_, this.f_46015_));
       Set<BlockPos> set = Sets.newHashSet();
       int i = 16;
@@ -176,6 +_,7 @@
       int j2 = Mth.m_14107_(this.f_46015_ - (double)f2 - 1.0D);
       int j1 = Mth.m_14107_(this.f_46015_ + (double)f2 + 1.0D);
       List<Entity> list = this.f_46012_.m_45933_(this.f_46016_, new AABB((double)k1, (double)i2, (double)j2, (double)l1, (double)i1, (double)j1));
+      net.minecraftforge.event.ForgeEventFactory.onExplosionDetonate(this.f_46012_, this, list, f2);
       Vec3 vec3 = new Vec3(this.f_46013_, this.f_46014_, this.f_46015_);
 
       for(int k2 = 0; k2 < list.size(); ++k2) {
@@ -238,7 +_,7 @@
             if (!blockstate.m_60795_()) {
                BlockPos blockpos1 = blockpos.m_7949_();
                this.f_46012_.m_46473_().m_6180_("explosion_blocks");
-               if (block.m_6903_(this)) {
+               if (blockstate.canDropFromExplosion(this.f_46012_, blockpos, this)) {
                   Level $$9 = this.f_46012_;
                   if ($$9 instanceof ServerLevel) {
                      ServerLevel serverlevel = (ServerLevel)$$9;
@@ -255,8 +_,7 @@
                   }
                }
 
-               this.f_46012_.m_7731_(blockpos, Blocks.f_50016_.m_49966_(), 3);
-               block.m_7592_(this.f_46012_, blockpos, this);
+               blockstate.onBlockExploded(this.f_46012_, blockpos, this);
                this.f_46012_.m_46473_().m_7238_();
             }
          }
@@ -281,6 +_,7 @@
    }
 
    private static void m_46067_(ObjectArrayList<Pair<ItemStack, BlockPos>> p_46068_, ItemStack p_46069_, BlockPos p_46070_) {
+      if (p_46069_.m_41619_()) return; // CraftBukkit - SPIGOT-5425
       int i = p_46068_.size();
 
       for(int j = 0; j < i; ++j) {
@@ -347,6 +_,15 @@
 
    public List<BlockPos> m_46081_() {
       return this.f_46020_;
+   }
+
+   public Vec3 getPosition() {
+      return this.position;
+   }
+
+   @Nullable
+   public Entity getExploder() {
+      return this.f_46016_;
    }
 
    public static enum BlockInteraction {
